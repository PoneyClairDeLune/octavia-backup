var b=function(n,t){let e=Math.min(n.length,t.length),i=n.slice(0,e),o=t.slice(0,e),s=0,c=0;for(;c<e&&s==0;)s=Math.sign(i[c]-o[c]),c++;return s},h=function(){this.pool=[],this.point=function(n,t=!1){if(this.pool.length>0){let e=this.pool.length,i=1<<Math.floor(Math.log2(e)),o=i,s=64;for(;i>=1&&s>=0;){if(s<=0)throw new Error("TTL reached.");if(o==e)o-=i;else{let f=b(n,this.pool[o]);switch(f){case 0:{s=0;break}case 1:{o+i<=e&&(o+=i);break}case-1:{o!=0&&(o-=i);break}default:console.warn(`Unexpected result ${f}.`)}}i=i>>1,s--}let c=!0;if(o>=this.pool.length)c=!1;else{let f=this;this.pool[o].forEach(function(d,p,m){c&&d!=n[p]&&(c=!1)}),!c&&b(n,this.pool[o])>0&&o++}return c||t?o:-1}else return t?0:-1},this.add=function(n,t){return n.data=t,this.pool.splice(this.point(n,!0),0,n),this},this.default=function(n){console.warn(`No match for "${n}". Default action not defined.`)},this.get=function(n){let t=this.point(n);if(t>-1)return this.pool[t].data;this.default(n)},this.run=function(n,...t){let e=this.point(n);e>-1?this.pool[e].data(n.slice(this.pool[e].length),...t):this.default(n,...t)}};var w=class{#n={};addEventListener(n,t){this.#n[n]||(this.#n[n]=[]),this.#n[n].unshift(t)}removeEventListener(n,t){if(this.#n[n]){let e=this.#n[n].indexOf(t);e>-1&&this.#n[n].splice(e,1),this.#n[n].length<1&&delete this.#n[n]}}dispatchEvent(n,t){let e=new Event(n),i=this;e.data=t,this.#n[n]?.length>0&&this.#n[n].forEach(function(o){o?.call(i,e)}),this[`on${n}`]&&this[`on${n}`](e)}};var r=["off","hall","room","stage","plate","delay LCR","delay LR","echo","cross delay","early reflections","gate reverb","reverse gate"];r[16]="white room";r[17]="tunnel";r[19]="basement";r[20]="karaoke";r[64]="pass through";r[65]="chorus";r[66]="celeste";r[67]="flanger";r[68]="symphonic";r[69]="rotary speaker";r[70]="tremelo";r[71]="auto pan";r[72]="phaser";r[73]="distortion";r[74]="overdrive";r[75]="amplifier";r[76]="3-band EQ";r[77]="2-band EQ";r[78]="auto wah";var X=["melodic","drum","drum set 1","drum set 2"],P=[17.1,18.6,20.2,21.8,23.3,24.9,26.5,28,29.6,31.2,32.8,34.3,35.9,37.5,39,40.6,42.2,43.7,45.3,46.9,48.4,50],$=[20,22,25,28,32,36,40,45,50,56,63,70,80,90,100,110,125,140,160,180,200,225,250,280,315,355,400,450,500,560,630,700,800,900,1e3,1100,1200,1400,1600,1800,2e3,2200,2500,2800,3200,3600,4e3,4500,5e3,5600,6300,7e3,8e3,9e3,1e4,11e3,12e3,14e3,16e3,18e3,2e4],v=[0,.04,.08,.13,.17,.21,.25,.29,.34,.38,.42,.46,.51,.55,.59,.63,.67,.72,.76,.8,.84,.88,.93,.97,1.01,1.05,1.09,1.14,1.18,1.22,1.26,1.3,1.35,1.39,1.43,1.47,1.51,1.56,1.6,1.64,1.68,1.72,1.77,1.81,1.85,1.89,1.94,1.98,2.02,2.06,2.1,2.15,2.19,2.23,2.27,2.31,2.36,2.4,2.44,2.48,2.52,2.57,2.61,2.65,2.69,2.78,2.86,2.94,3.03,3.11,3.2,3.28,3.37,3.45,3.53,3.62,3.7,3.87,4.04,4.21,4,37,4.54,4.71,4.88,5.05,5.22,5.38,5.55,5.72,6.06,6.39,6.73,7.07,7.4,7.74,8.08,8.41,8.75,9.08,9.42,9.76,10.1,10.8,11.4,12.1,12.8,13.5,14.1,14.8,15.5,16.2,16.8,17.5,18.2,19.5,20.9,22.2,23.6,24.9,26.2,27.6,28.9,30.3,31.6,33,34.3,37,39.7],E=function(n){let t=.1,e=-.3;return n>66?(t=5,e=315):n>56?(t=1,e=47):n>46&&(t=.5,e=18.5),t*n-e},M=function(n){return n>105?P[n-106]:n>100?n*1.1-100:n/10};var y=["room 1","room 2","room 3","hall 1","hall 2","plate","delay","panning delay"],R=["chorus 1","chorus 2","chorus 3","chorus 4","feedback","flanger","short delay","short delay feedback"];var u=function(n=64){return Math.round(2e3*Math.log10(n/64))/100},g=function(n,t){let e=0;for(let i=0;i<n.length;i++)i%8!=0&&(t(n[i],e,n),e++)};var G=["?","gm","gs","xg","g2","mt32","ns5r","ag10","x5d","05rw"],l={};G.forEach(function(n,t){l[n]=t});var x=[[0,0,0,0,121,0,0,56,82,81],[0,0,1,0,0,127,0,0,0,0]],k=[120,127,120,127,120,127,61,62,62,62],C=[0,3,81,84,88],D=[8,9,10,32,33,36,37,99,100,101];var a=function(n,t,e){e[t]=0},N=function(n){let t=[[]];return n?.forEach(function(e){e==247||(e==240?t.push([]):t[t.length-1].push(e))}),t},S=function(n,t="",e="",i=2){return n?`${t}${n.toString().padStart(i,"0")}${e}`:""},Q=class extends w{#n=0;#v=new Array(256);#E=0;#m=new Array(64);#t=new Uint8ClampedArray(8192);#g=new Uint8ClampedArray(64);#d=new Uint8ClampedArray(8192);#r=new Uint16Array(256);#P=new Int16Array(64);#M=new Array(64);#l=new Uint8Array(64);#y=0;#h=new Uint8Array(256);#C=new Int8Array(640);#R=0;#b=0;#w=100;#$=0;#G="";#x=0;#s=!1;#e=[];#f=new Uint8Array(32);#X=new Uint8Array(128);chRedir(n,t,e){if([l.gs,l.ns5r].indexOf(this.#n)>-1){if(this.#X[t])return(this.#X[t]-1)*16+n;if(e)return n;let i=0;return this.#f[n]==0?(this.#f[n]=t,console.debug(`Assign track ${t} to channel ${n+1}.`)):this.#f[n]!=t&&(i=16,this.#f[n+i]==0?(this.#f[n+i]=t,console.debug(`Assign track ${t} to channel ${n+i+1}.`)):this.#f[n+i]!=t&&(i=0)),n+i}else return n}#c=[];#k;#D={8:function(n){let e=this.chRedir(n.part,n.track)*128+n.data[0],i=this.#r.indexOf(e);i>-1&&(this.#r[i]=0,this.#d[e]=0)},9:function(n){let t=this.chRedir(n.part,n.track);this.#m[t]=1;let e=t*128+n.data[0];if(n.data[1]>0){let i=0;for(;this.#r[i]>0;)i++;i<256?(this.#r[i]=e,this.#d[e]=n.data[1],this.#l[t]<n.data[1]&&(this.#l[t]=n.data[1])):console.error("Polyphony exceeded.")}else{let i=this.#r.indexOf(e);i>-1&&(this.#r[i]=0,this.#d[e]=0)}},10:function(n){let e=this.chRedir(n.part,n.track)*128+n.data[0];this.#r.indexOf(e)>-1&&(this.#d[e]=data[1])},11:function(n){let t=this.chRedir(n.part,n.track);this.#m[t]=1;let e=t*128;switch(n.data[0]){case 0:{if(this.#n==l.gs||this.#n==0)n.data[1]<48?(this.#t[e]>119&&(n.data[1]=this.#t[e],this.#n||(n.data[1]=120,console.debug(`Forced channel ${t+1} to stay drums.`))),n.data[1]>0&&(console.debug(`Roland GS detected with MSB: ${n.data[1]}`),this.switchMode("gs"))):n.data[1]==62&&this.switchMode("x5d");else if(this.#n==l.gm)n.data[1]<48&&this.#t[e]>119&&(n.data[1]=120,this.switchMode("gs",!0),console.debug(`Forced channel ${t+1} to stay drums.`));else if(this.#n==l.x5d){if(n.data[1]>0&&n.data[1]<8)this.switchMode("05rw",!0);else if(n.data[1]==56){let i=0;for(let o=0;o<16;o++){let s=this.#t[128*o];(s==56||s==62)&&i++}i>14&&this.switchMode("ag10",!0)}}break}case 6:{if(this.#y){if(this.#t[e+99]==1){let i=D.indexOf(this.#t[e+98]);i>-1&&(this.#C[t*10+i]=n.data[1]-64)}}else this.#t[e+101]==0&&this.#t[e+100]<3&&(this.#h[t*4+[0,1,3][this.#t[e+100]]]=n.data[1]);break}case 38:{this.#y||this.#t[e+101]==0&&this.#t[e+100]==1&&(this.#h[t*4+2]=n.data[1]);break}case 98:case 99:{this.#y=1;break}case 100:case 101:{this.#y=0;break}}this.#t[e+n.data[0]]=n.data[1]},12:function(n){let t=this.chRedir(n.part,n.track);this.#m[t]=1,this.#g[t]=n.data,this.#M[t]=0},13:function(n){let t=this,e=this.chRedir(n.part,n.track);this.#r.forEach(function(i){let o=i>>7;e==o&&(t.#d[i]=n.data)})},14:function(n){let t=this.chRedir(n.part,n.track);this.#P[t]=n.data[1]*128+n.data[0]-8192},15:function(n){let t=this;N(n.data).forEach(function(e){t.#u.run(e,n.track)})},255:function(n){if((this.#c[n.meta]||function(e,i,o){}).call(this,n.data,n.track,n.meta),n.meta!=32&&(this.#$=0),C.indexOf(n.meta)>-1)return n.reply="meta",n;self.debugMode&&console.debug(n)}};#u;#i;#o;#S;#p;#a;getActive(){let n=this.#m.slice();return this.#n==l.mt32&&(n[0]=0),n}getCc(n){let t=n*128,e=this.#t.slice(t,t+128);return e[0]=e[0]||this.#R,e[32]=e[32]||this.#b,e}getCcAll(){let n=this.#t.slice();for(let t=0;t<64;t++){let e=t*128;n[e]=n[e]||this.#R,n[e+32]=n[e+32]||this.#b}return n}getPitch(){return this.#P}getProgram(){return this.#g}getTexts(){return this.#e.slice()}getVel(n){let t=new Map,e=this;return this.#r.forEach(function(i){let o=Math.floor(i/128),s=i%128;n==o&&e.#d[i]>0&&t.set(s,e.#d[i])}),t}getBitmap(){return{bitmap:this.#v,expire:this.#E}}getCustomNames(){return this.#M.slice()}getLetter(){return{text:this.#G,expire:this.#x}}getMode(){return G[this.#n]}getMaster(){return{volume:this.#w}}getRawStrength(){let n=this;return this.#r.forEach(function(t){let e=Math.floor(t/128);n.#d[t]>n.#l[e]&&(n.#l[e]=n.#d[t])}),this.#l}getStrength(){let n=[],t=this;return this.getRawStrength().forEach(function(e,i){n[i]=Math.floor(e*t.#t[i*128+7]*t.#t[i*128+11]*t.#w/803288)}),n}getRpn(){return this.#h}getNrpn(){return this.#C}init(){this.dispatchEvent("mode","?"),this.#n=0,this.#R=0,this.#b=0,this.#$=0,this.#m.forEach(a),this.#t.forEach(a),this.#g.forEach(a),this.#d.forEach(a),this.#r.forEach(a),this.#l.forEach(a),this.#P.forEach(a),this.#C.forEach(a),this.#w=100,this.#e=[],this.#x=0,this.#G="",this.#E=0,this.#v.forEach(a),this.#M.forEach(a),this.#s=!1,this.#f.forEach(a),this.#X.forEach(a),this.#t[1152]=127,this.#t[3200]=127,this.#t[5248]=127,this.#t[7296]=127;for(let n=0;n<64;n++){let t=n*128;this.#t[t+7]=127,this.#t[t+11]=127,this.#t[t+74]=127,this.#t[t+10]=64,this.#t[t+101]=127,this.#t[t+100]=127,this.#t[t+99]=127,this.#t[t+98]=127;let e=n*4;this.#h[e]=2,this.#h[e+1]=64,this.#h[e+2]=0,this.#h[e+3]=64}}switchMode(n,t=!1){let e=G.indexOf(n);if(e>-1){if(this.#n==0||t){this.#n=e,this.#R=x[0][e],this.#b=x[1][e];for(let i=0;i<64;i++)k.indexOf(this.#t[i*128])>-1&&(this.#t[i*128]=k[e]);this.dispatchEvent("mode",n)}}else throw new Error(`Unknown mode ${n}`)}newStrength(){this.#l.forEach(a)}runJson(n){return this.#D[n.type].call(this,n)}runRaw(n){}constructor(){super();let n=this;this.#k=new h,this.#u=new h,this.#i=new h,this.#o=new h,this.#S=new h,this.#p=new h,this.#a=new h,this.#k.default=function(t,e){console.debug(`Unparsed meta 127 sequence on track ${e}: `,t)},this.#u.default=function(t){console.debug("Unparsed SysEx: ",t)},this.#i.default=function(t,e){console.debug(`Unparsed GS Part on channel ${e}: `,t)},this.#S.default=function(t,e){console.debug(`Unparsed XG Part on channel ${e}: `,t)},this.#p.default=function(t,e){console.debug(`Unparsed XG Drum Part on channel ${e}: `,t)},this.#c[1]=function(t){switch(t.slice(0,2)){case"@I":{this.#s=!0,this.#e.unshift(`Kar.Info: ${t.slice(2)}`);break}case"@K":{this.#s=!0,this.#e.unshift("Karaoke mode active."),console.debug(`Karaoke mode active: ${t.slice(2)}`);break}case"@L":{this.#s=!0,this.#e.unshift(`Language: ${t.slice(2)}`);break}case"@T":{this.#s=!0,this.#e.unshift(`Ka.Title: ${t.slice(2)}`);break}case"@V":{this.#s=!0,this.#e.unshift(`Kara.Ver: ${t.slice(2)}`);break}default:this.#s?t[0]=="\\"?this.#e.unshift(`@ ${t.slice(1)}`):t[0]=="/"?this.#e.unshift(t.slice(1)):this.#e[0]+=t:(this.#e[0]=t,this.#e.unshift(""))}},this.#c[2]=function(t){this.#e.unshift(`Copyrite: ${t}`)},this.#c[3]=function(t,e){e<1&&this.#$<1&&this.#e.unshift(`TrkTitle: ${t}`)},this.#c[4]=function(t,e){e<1&&this.#$<1&&this.#e.unshift(`${S(this.#$,""," ")}Instrmnt: ${t}`)},this.#c[5]=function(t){t.trim()==""?this.#e.unshift(""):this.#e[0]+=`${t}`},this.#c[6]=function(t){this.#e.unshift(`${S(this.#$,""," ")}C.Marker: ${t}`)},this.#c[7]=function(t){this.#e.unshift(`CuePoint: ${t}`)},this.#c[32]=function(t){this.#$=t[0]+1},this.#c[33]=function(t,e){console.debug(`Track ${e} requests to get assigned to output ${t}.`),n.#X[e]=t+1},this.#c[127]=function(t,e){n.#k.run(t,e)},this.#u.add([126,127,9,1],function(){n.switchMode("gm",!0),n.#s=n.#s||!1,console.info("MIDI reset: GM")}).add([126,127,9,3],function(){n.switchMode("g2",!0),n.#s=n.#s||!1,console.info("MIDI reset: GM2")}).add([65,16,22,18,127,1],function(){n.switchMode("mt32",!0),n.#s=!1,console.info("MIDI reset: MT-32")}).add([65,16,66,18,64,0,127,0,65],function(){n.switchMode("gs",!0),n.#t[1152]=120,n.#t[3200]=120,n.#t[5248]=120,n.#t[7296]=120,n.#s=!1,n.#f.forEach(a),console.info("MIDI reset: GS")}).add([66,48,66,52,0],function(t){n.switchMode("ns5r",!0),n.#s=!1,console.info("KORG reset:",t)}).add([67,16,76,0,0,126,0],function(t){n.switchMode("xg",!0),n.#s=!1,console.info("MIDI reset: XG")}),this.#k.add([67,0,1],function(t,e){n.#X[e]=t[0]+1}),this.#u.add([127,127,4,1],function(t){n.switchMode("gm"),n.#w=(t[1]<<7+t[0])/163.83}),this.#u.add([67,16,76,6,0],function(t){let e=t[0];n.#G=" ".repeat(e),n.#x=Date.now()+3200,t.slice(1).forEach(function(i){n.#G+=String.fromCharCode(i)})}).add([67,16,76,7,0,0],function(t){for(n.#E=Date.now()+3200;t.length<48;)t.unshift(0);t.forEach(function(e,i){let o=Math.floor(i/16),s=i%16,c=(s*3+o)*7,f=7,d=0;for(c-=s*5,o==2&&(f=2);d<f;)n.#v[c+d]=e>>6-d&1,d++})}).add([67,16,76,2,1,0],function(t){console.info(`XG reverb type: ${r[t[0]]}${t[1]>0?" "+(t[1]+1):""}`)}).add([67,16,76,2,1,2],function(t){console.info(`XG reverb time: ${E(t)}s`)}).add([67,16,76,2,1,3],function(t){console.info(`XG reverb diffusion: ${t}`)}).add([67,16,76,2,1,4],function(t){console.info(`XG reverb initial delay: ${t}`)}).add([67,16,76,2,1,5],function(t){console.info(`XG reverb high pass cutoff: ${$[t[0]]}Hz`)}).add([67,16,76,2,1,6],function(t){console.info(`XG reverb low pass cutoff: ${$[t[0]]}Hz`)}).add([67,16,76,2,1,7],function(t){console.info(`XG reverb width: ${t}`)}).add([67,16,76,2,1,8],function(t){console.info(`XG reverb height: ${t}`)}).add([67,16,76,2,1,9],function(t){console.info(`XG reverb depth: ${t}`)}).add([67,16,76,2,1,10],function(t){console.info(`XG reverb wall type: ${t}`)}).add([67,16,76,2,1,11],function(t){console.info(`XG reverb dry/wet: ${t[0]}`)}).add([67,16,76,2,1,12],function(t){console.info(`XG reverb return: ${t}`)}).add([67,16,76,2,1,13],function(t){console.info(`XG reverb pan: ${t[0]-64}`)}).add([67,16,76,2,1,16],function(t){console.info(`XG reverb delay: ${t}`)}).add([67,16,76,2,1,17],function(t){console.info(`XG density: ${t}`)}).add([67,16,76,2,1,18],function(t){console.info(`XG reverb balance: ${t}`)}).add([67,16,76,2,1,20],function(t){console.info(`XG reverb feedback: ${t}`)}).add([67,16,76,2,1,32],function(t){console.info(`XG chorus type: ${r[t[0]]}${t[1]>0?" "+(t[1]+1):""}`)}).add([67,16,76,2,1,34],function(t){console.info(`XG chorus LFO: ${v[t[0]]}Hz`)}).add([67,16,76,2,1,35],function(t){}).add([67,16,76,2,1,36],function(t){console.info(`XG chorus feedback: ${t}`)}).add([67,16,76,2,1,37],function(t){console.info(`XG chorus delay offset: ${M(t[0])}ms`)}).add([67,16,76,2,1,39],function(t){console.info(`XG chorus low: ${$[t[0]]}Hz`)}).add([67,16,76,2,1,40],function(t){console.info(`XG chorus low: ${t[0]-64}dB`)}).add([67,16,76,2,1,41],function(t){console.info(`XG chorus high: ${$[t[0]]}Hz`)}).add([67,16,76,2,1,42],function(t){console.info(`XG chorus high: ${t[0]-64}dB`)}).add([67,16,76,2,1,43],function(t){console.info(`XG chorus dry/wet: ${t}`)}).add([67,16,76,2,1,44],function(t){console.info(`XG chorus return: ${t}`)}).add([67,16,76,2,1,45],function(t){console.info(`XG chorus pan: ${t[0]-64}`)}).add([67,16,76,2,1,46],function(t){console.info(`XG chorus to reverb: ${t}`)}).add([67,16,76,2,1,64],function(t){console.info(`XG variation type: ${r[t[0]]}${t[1]>0?" "+(t[1]+1):""}`)}).add([67,16,76,2,1,66],function(t){console.info(`XG variation 1: ${t}`)}).add([67,16,76,2,1,68],function(t){console.info(`XG variation 2: ${t}`)}).add([67,16,76,2,1,70],function(t){console.info(`XG variation 3: ${t}`)}).add([67,16,76,2,1,72],function(t){console.info(`XG variation 4: ${t}`)}).add([67,16,76,2,1,74],function(t){console.info(`XG variation 5: ${t}`)}).add([67,16,76,2,1,76],function(t){console.info(`XG variation 6: ${t}`)}).add([67,16,76,2,1,78],function(t){console.info(`XG variation 7: ${t}`)}).add([67,16,76,2,1,80],function(t){console.info(`XG variation 8: ${t}`)}).add([67,16,76,2,1,82],function(t){console.info(`XG variation 9: ${t}`)}).add([67,16,76,2,1,84],function(t){console.info(`XG variation 10: ${t}`)}).add([67,16,76,2,1,86],function(t){console.info(`XG variation return: ${u(t[0])}dB`)}).add([67,16,76,2,1,87],function(t){console.info(`XG variation pan: ${t[0]-64}`)}).add([67,16,76,2,1,88],function(t){console.info(`XG variation to reverb: ${u(t[0])}dB`)}).add([67,16,76,2,1,89],function(t){console.info(`XG variation to chorus: ${u(t[0])}dB`)}).add([67,16,76,2,1,90],function(t){console.info(`XG variation connection: ${t[0]?"system":"insertion"}`)}).add([67,16,76,2,1,91],function(t){console.info(`XG variation part: ${t}`)}).add([67,16,76,2,1,92],function(t){console.info(`XG variation mod wheel: ${t[0]-64}`)}).add([67,16,76,2,1,93],function(t){console.info(`XG variation bend wheel: ${t[0]-64}`)}).add([67,16,76,2,1,94],function(t){console.info(`XG variation channel after touch: ${t[0]-64}`)}).add([67,16,76,2,1,95],function(t){console.info(`XG variation AC1: ${t[0]-64}`)}).add([67,16,76,2,1,96],function(t){console.info(`XG variation AC2: ${t[0]-64}`)}).add([67,16,76,8],function(t,e){n.#S.run(t.slice(1),n.chRedir(t[0],e))}).add([67,16,76,48],function(t){n.#p.run(t.slice(1),0,t[0])}).add([67,16,76,49],function(t){n.#p.run(t.slice(1),1,t[0])}).add([67,16,76,50],function(t){n.#p.run(t.slice(1),2,t[0])}).add([67,16,76,51],function(t){n.#p.run(t.slice(1),3,t[0])}),this.#u.add([65,1],function(t){n.switchMode("mt32"),n.#a.run(t,1)}).add([65,2],function(t){n.switchMode("mt32"),n.#a.run(t,2)}).add([65,3],function(t){n.switchMode("mt32"),n.#a.run(t,3)}).add([65,4],function(t){n.switchMode("mt32"),n.#a.run(t,4)}).add([65,5],function(t){n.switchMode("mt32"),n.#a.run(t,5)}).add([65,6],function(t){n.switchMode("mt32"),n.#a.run(t,6)}).add([65,7],function(t){n.switchMode("mt32"),n.#a.run(t,7)}).add([65,8],function(t){n.switchMode("mt32"),n.#a.run(t,8)}).add([65,9],function(t){n.switchMode("mt32"),n.#m[9]=1,n.#a.run(t,9)}),this.#a.add([22,18,2,0,0],function(t,e){let i="";t.slice(0,10).forEach(function(o){o>31&&(i+=String.fromCharCode(o))}),n.#M[e]=i,console.debug(`MT-32 tone properties on channel ${e+1} (${i}): ${t.slice(10)}`)}),this.#u.add([65,16,66,18,0,0,127],function(t){n.switchMode("gs",!0),n.#t[1152]=120,n.#t[3200]=120,n.#t[5248]=120,n.#t[7296]=120,n.#f.forEach(a),n.#s=!1,n.#b=3,console.info(`GS system set to ${t[0]?"dual":"single"} mode.`)}).add([65,16,66,18,64,0,0],function(t){}).add([65,16,66,18,64,0,4],function(t){n.#w=t[0]*129/163.83}).add([65,16,66,18,64,0,5],function(t){console.info(`GS master key shift: ${t[0]-64} semitones.`)}).add([65,16,66,18,64,0,6],function(t){console.info(`GS master pan:${t[0]-64}.`)}).add([65,16,66,18,64,1,48],function(t){console.info(`GS reverb type: ${y[t[0]]}`)}).add([65,16,66,18,64,1,49],function(t){}).add([65,16,66,18,64,1,50],function(t){console.info(`GS reverb pre-LPF: ${t[0]}`)}).add([65,16,66,18,64,1,51],function(t){console.info(`GS reverb level: ${t[0]}`)}).add([65,16,66,18,64,1,52],function(t){console.info(`GS reverb time: ${t[0]}`)}).add([65,16,66,18,64,1,53],function(t){console.info(`GS reverb delay feedback: ${t[0]}`)}).add([65,16,66,18,64,1,55],function(t){console.info(`GS reverb pre-delay time: ${t[0]}`)}).add([65,16,66,18,64,1,56],function(t){console.info(`GS chorus type: ${R[t[0]]}`)}).add([65,16,66,18,64,1,57],function(t){console.info(`GS chorus pre-LPF: ${t[0]}`)}).add([65,16,66,18,64,2,0],function(t){console.info(`GS EQ low: ${t[0]?400:200}Hz`)}).add([65,16,66,18,64,2,1],function(t){console.info(`GS EQ low: ${t[0]-64}dB`)}).add([65,16,66,18,64,2,2],function(t){console.info(`GS EQ high: ${t[0]?6e3:3e3}Hz`)}).add([65,16,66,18,64,2,3],function(t){console.info(`GS EQ high: ${t[0]-64}dB`)}).add([65,16,66,18,64,3],function(t){}).add([65,16,69,18,16,0],function(t){let e=t[0];n.#G=" ".repeat(e),n.#x=Date.now()+3200,t.pop(),t.slice(1).forEach(function(i){n.#G+=String.fromCharCode(i)})}).add([65,16,69,18,16,1,0],function(t){n.#E=Date.now()+3200,t.forEach(function(e,i){if(i<64){let o=Math.floor(i/16),s=i%16,c=(s*4+o)*5,f=5,d=0;for(c-=s*4,o==3&&(f=1);d<f;)n.#v[c+d]=e>>4-d&1,d++}})}).add([65,16,66,18,64,16],function(t,e){n.#i.run(t,n.chRedir(9,e,!0))}).add([65,16,66,18,64,17],function(t,e){n.#i.run(t,n.chRedir(0,e,!0))}).add([65,16,66,18,64,18],function(t,e){n.#i.run(t,n.chRedir(1,e,!0))}).add([65,16,66,18,64,19],function(t,e){n.#i.run(t,n.chRedir(2,e,!0))}).add([65,16,66,18,64,20],function(t,e){n.#i.run(t,n.chRedir(3,e,!0))}).add([65,16,66,18,64,21],function(t,e){n.#i.run(t,n.chRedir(4,e,!0))}).add([65,16,66,18,64,22],function(t,e){n.#i.run(t,n.chRedir(5,e,!0))}).add([65,16,66,18,64,23],function(t,e){n.#i.run(t,n.chRedir(6,e,!0))}).add([65,16,66,18,64,24],function(t,e){n.#i.run(t,n.chRedir(7,e,!0))}).add([65,16,66,18,64,25],function(t,e){n.#i.run(t,n.chRedir(8,e,!0))}).add([65,16,66,18,64,26],function(t,e){n.#i.run(t,n.chRedir(10,e,!0))}).add([65,16,66,18,64,27],function(t,e){n.#i.run(t,n.chRedir(11,e,!0))}).add([65,16,66,18,64,28],function(t,e){n.#i.run(t,n.chRedir(12,e,!0))}).add([65,16,66,18,64,29],function(t,e){n.#i.run(t,n.chRedir(13,e,!0))}).add([65,16,66,18,64,30],function(t,e){n.#i.run(t,n.chRedir(14,e,!0))}).add([65,16,66,18,64,31],function(t,e){n.#i.run(t,n.chRedir(15,e,!0))}).add([65,16,66,18,64,64],function(t,e){n.#o.run(t,n.chRedir(9,e,!0))}).add([65,16,66,18,64,65],function(t,e){n.#o.run(t,n.chRedir(0,e,!0))}).add([65,16,66,18,64,66],function(t,e){n.#o.run(t,n.chRedir(1,e,!0))}).add([65,16,66,18,64,67],function(t,e){n.#o.run(t,n.chRedir(2,e,!0))}).add([65,16,66,18,64,68],function(t,e){n.#o.run(t,n.chRedir(3,e,!0))}).add([65,16,66,18,64,69],function(t,e){n.#o.run(t,n.chRedir(4,e,!0))}).add([65,16,66,18,64,70],function(t,e){n.#o.run(t,n.chRedir(5,e,!0))}).add([65,16,66,18,64,71],function(t,e){n.#o.run(t,n.chRedir(6,e,!0))}).add([65,16,66,18,64,72],function(t,e){n.#o.run(t,n.chRedir(7,e,!0))}).add([65,16,66,18,64,73],function(t,e){n.#o.run(t,n.chRedir(8,e,!0))}).add([65,16,66,18,64,74],function(t,e){n.#o.run(t,n.chRedir(10,e,!0))}).add([65,16,66,18,64,75],function(t,e){n.#o.run(t,n.chRedir(11,e,!0))}).add([65,16,66,18,64,76],function(t,e){n.#o.run(t,n.chRedir(12,e,!0))}).add([65,16,66,18,64,77],function(t,e){n.#o.run(t,n.chRedir(13,e,!0))}).add([65,16,66,18,64,78],function(t,e){n.#o.run(t,n.chRedir(14,e,!0))}).add([65,16,66,18,64,79],function(t,e){n.#o.run(t,n.chRedir(15,e,!0))}),n.#u.add([66,48,54,104],function(t,e){n.switchMode("x5d",!0),g(t,function(i,o){if(o<192){let s=n.chRedir(Math.floor(o/12),e,!0);switch(o%12){case 0:{n.#g[s]=i;break}case 1:{n.#t[s*128+7]=i;break}case 2:{n.#h[s*4+3]=i>127?256-i:64+i;break}case 3:break;case 4:{i<31&&(n.#t[s*128+10]=Math.round((i-15)*4.2+64));break}case 10:{n.#t[s*128]=i&3?82:56;break}}}else{let s=n.chRedir(o-192,e,!0)}})}).add([66,48,54,76,0],function(t,e){n.switchMode("x5d",!0);let i="",o=82,s=0,c=0,f="MSB	PRG	LSB	NME";g(t,function(d,p){if(s<100){let m=p%164;switch(!0){case m<10:{i+=String.fromCharCode(d);break}case m==11:{f+=`
${o}	${s}	${c}	${i.trim()}`,s++,i="";break}}}}),n.dispatchEvent("mapupdate",{overwrite:!0,voiceMap:f})}),n.#p.add([0],function(t,e,i){console.info(`XG Drum ${e} note ${i} coarse pitch bend ${t[0]-64}.`)}).add([1],function(t,e,i){console.info(`XG Drum ${e} note ${i} fine pitch bend ${t[0]-64}.`)}).add([2],function(t,e,i){console.info(`XG Drum ${e} note ${i} level ${t[0]}.`)}).add([3],function(t,e,i){console.info(`XG Drum ${e} note ${i} alt group ${t[0]}.`)}).add([4],function(t,e,i){console.info(`XG Drum ${e} note ${i} pan ${t[0]-64}.`)}).add([5],function(t,e,i){console.info(`XG Drum ${e} note ${i} reverb send ${u(t[0])}dB.`)}).add([6],function(t,e,i){console.info(`XG Drum ${e} note ${i} chorus send ${u(t[0])}dB.`)}).add([7],function(t,e,i){console.info(`XG Drum ${e} note ${i} variation send ${u(t[0])}dB.`)}).add([8],function(t,e,i){console.info(`XG Drum ${e} note ${i} key assign as ${t[0]>0?"multi":"single"}.`)}).add([9],function(t,e,i){}).add([10],function(t,e,i){}).add([11],function(t,e,i){}).add([12],function(t,e,i){}).add([13],function(t,e,i){}).add([14],function(t,e,i){}).add([15],function(t,e,i){}),n.#S.add([0],function(t,e){console.info(`XG Part reserve ${t[0]} elements for channel ${e}.`)}).add([1],function(t,e){n.#t[e*128]=t[0]}).add([2],function(t,e){n.#t[e*128+32]=t[0]}).add([3],function(t,e){n.#g[e]=t[0]}).add([4],function(t,e){console.info(`XG Part send CH${e} to CH${t[0]}. Channel redirect feature required!`)}).add([5],function(t,e){console.info(`XG Part mono/poly set to ${t[0]?"mono":"poly"} for channel ${e}.`)}).add([6],function(t,e){console.info(`XG Part repeat pressing set to ${["single","multi","inst"][t[0]]} mode for channel ${e}.`)}).add([7],function(t,e){let i=t[0];n.#t[128*e]=i>1?127:0,console.info(`XG Part use mode "${X[i]}" for channel ${e}.`)}).add([14],function(t,e){n.#t[128*e+10]=t[0]||128}).add([17],function(t,e){console.info(`XG Part dry level ${t[0]} for channel ${e}.`)}).add([18],function(t,e){console.info(`XG Part chorus send ${u(t[0])}dB for channel ${e}.`)}).add([19],function(t,e){console.info(`XG Part reverb send ${u(t[0])}dB for channel ${e}.`)}).add([20],function(t,e){console.info(`XG Part variation send ${u(t[0])}dB for channel ${e}.`)}).add([21],function(t,e){console.info(`XG Part LFO speed ${t[0]} for channel ${e}.`)}).add([29],function(t,e){console.info(`XG Part MW bend ${t[0]-64} semitones for channel ${e}.`)}).add([32],function(t,e){console.info(`XG Part MW LFO pitch depth ${t[0]} for channel ${e}.`)}).add([33],function(t,e){console.info(`XG Part MW LFO filter depth ${t[0]} for channel ${e}.`)}).add([35],function(t,e){console.info(`XG Part bend pitch ${t[0]-64} semitones for channel ${e}.`)}).add([83],function(t,e){}).add([103],function(t,e){n.#t[e*128+65]=t[0]}).add([104],function(t,e){n.#t[e*128+5]=t[0]}).add([105],function(t,e){console.info(`XG Part EG initial ${t[0]-64} for channel ${e}.`)}).add([106],function(t,e){console.info(`XG Part EG attack time ${t[0]-64} for channel ${e}.`)}),n.#i.add([0],function(t,e){n.#t[e*128]==120&&(t[0]=120),n.#t[e*128]=t[0]||0,n.#g[e]=t[1]||0}).add([2],function(t,e){}).add([19],function(t,e){}).add([20],function(t,e){}).add([21],function(t,e){console.info(`GS Part ${e+1} type: ${["melodic","drum 1","drum 2"][t[0]]}.`),t[0]>0&&(n.#t[e*128]=120)}).add([25],function(t,e){n.#t[e*128+7]=t[0]}).add([28],function(t,e){n.#t[e*128+10]=t[0]||128}).add([33],function(t,e){n.#t[e*128+93]=t[0]}).add([34],function(t,e){n.#t[e*128+91]=t[0]}),n.#o.add([0],function(t,e){n.#t[e*128+32]=t[0]}).add([1],function(t,e){n.#t[e*128+32]=t[0]}).add([32],function(t,e){console.info(`GS Part ${e+1} turned EQ ${t[0]?"on":"off"}.`)}).add([33],function(t,e){}).add([34],function(t,e){console.info(`GS Part ${e+1} turned EFX ${t[0]?"on":"off"}.`)})}};export{Q as OctaviaDevice};
